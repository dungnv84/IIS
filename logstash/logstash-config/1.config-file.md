# logstash server: 192.168.59.10, cai nay dung cho chay logtash bang tay
# nano  logstash-input-opensearch.conf 
./bin/logstash -f logstash-input-opensearch.conf

nano  logstash-input-opensearch.conf 

input {
    stdin {
        codec => json
    }
    http {
    #   host => "192.168.59.10"
        host => "0.0.0.0"
        port => 8080
    }
}

output {
    stdout {
        codec => rubydebug
    }
  
    file {
        path => "output.txt"
    }
}

# dÃ¹ng postman

PUT  192.168.59.10:8080
raw json

{
    "vietdung": 2,
    "haha": "hahs"
}


# remove field: remove vietdung

input {
    stdin {
        codec => json
    }
    http {
        host => "0.0.0.0"
        port => 8080
    }
}

filter {
  mutate {
    remove_field => [ "vietdung" ]
  }
}


output {
    stdout {
        codec => rubydebug
    }
  
    file {
        path => "output.txt"
    }
    elasticsearch {
      hosts => "http://192.168.59.10:9200"
      index => "logs-%{+dd.MM.YYYY}"
      user => "elastic"
      password => "vietdungvl" 
    }    
}


# remove field

  mutate {
    remove_field => [ "[headers][accept_encoding]" ]
  }

